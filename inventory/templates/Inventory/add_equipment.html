<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Equipment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-3">Add New Equipment</h1>
        <form method="post" class="mt-3">
            {% csrf_token %}

            <!-- Asset ID -->
            <div class="mb-3">
                <label for="id_asset_id" class="form-label">Asset ID</label>
                {{ form.asset_id }}
            </div>

            <!-- Name -->
            <div class="mb-3">
                <label for="id_name" class="form-label">Name</label>
                {{ form.name }}
            </div>

            <!-- Description -->
            <div class="mb-3">
                <label for="id_description" class="form-label">Description</label>
                {{ form.description }}
            </div>

            <!-- Procured Date -->
            <div class="mb-3">
                <label for="id_procured_date" class="form-label">Procured Date</label>
                <input type="text" id="id_procured_date" name="procured_date" 
                       value="{{ form.procured_date.value|date:'d/m/Y' }}" 
                       placeholder="DD/MM/YYYY" 
                       class="form-control datepicker">
            </div>

            <!-- Warranty Expiration Date -->
            <div class="mb-3">
                <label for="id_warranty_expiration_date" class="form-label">Warranty Expiration Date</label>
                <input type="text" id="id_warranty_expiration_date" name="warranty_expiration_date" 
                       value="{{ form.warranty_expiration_date.value|date:'d/m/Y' }}" 
                       placeholder="DD/MM/YYYY" 
                       class="form-control datepicker">
            </div>

            <!-- Assigned To -->
            <div class="mb-3">
                <label for="id_assigned_to" class="form-label">Assigned To</label>
                {{ form.assigned_to }}
            </div>

            <!-- Location -->
            <div class="mb-3">
                <label for="id_location" class="form-label">Location</label>
                {{ form.location }}
            </div>

            <!-- Status -->
            <div class="mb-3">
                <label for="id_status" class="form-label">Status</label>
                {{ form.status }}
            </div>

            <!-- Usage Type -->
            <div class="mb-3">
                <label for="id_usage_type" class="form-label">Usage Type</label>
                {{ form.usage_type }}
            </div>

            <button type="submit" class="btn btn-primary">Save Equipment</button>
            <a href="{% url 'equipment_list' %}" class="btn btn-secondary">Back to Inventory</a>
        </form>
    </div>

    <!-- Add JavaScript for Date Picker -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize a custom date picker for DD/MM/YYYY format
        document.addEventListener('DOMContentLoaded', function () {
            const datepickers = document.querySelectorAll('.datepicker');
            datepickers.forEach((field) => {
                field.addEventListener('focus', () => {
                    field.type = 'text';
                });
                field.addEventListener('blur', () => {
                    const value = field.value;
                    if (value.match(/^\d{2}\/\d{2}\/\d{4}$/)) {
                        field.type = 'text'; // Ensure correct format
                    } else {
                        field.type = 'text';
                        field.value = ''; // Clear if invalid format
                    }
                });
            });
        });
    </script>
</body>
</html>
